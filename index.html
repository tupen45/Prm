<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birbhum Pharmacy School</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" xintegrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Google Font: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for specific elements not easily covered by Tailwind or for overrides */
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }
        .hero-section {
            /* Placeholder image for the building, adjusted for a slightly friendly/cartoon feel */
            background-image: url('https://placehold.co/1200x500/C8E6C9/333333?text=Friendly+School+Building');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 500px; /* Fixed height for hero section */
            position: relative;
        }
        .hero-overlay {
            background-color: rgba(0, 0, 0, 0.3); /* Dark overlay for text readability */
        }
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        .green-bg-section {
            background-color: #4CAF50; /* A shade of green matching the image */
        }
        .dark-green-bg-section {
            background-color: #388E3C; /* A darker shade of green */
        }
        .footer-bg {
            background-color: #212121; /* Dark footer background */
        }

        /* Popup styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .popup-content {
            background-color: white;
            padding: 2.5rem; /* p-10 */
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* shadow-2xl */
            position: relative;
            max-width: 90%;
            width: 500px;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .popup-overlay.active .popup-content {
            transform: translateY(0);
            opacity: 1;
        }
        .close-button {
            position: absolute;
            top: 1rem; /* top-4 */
            right: 1rem; /* right-4 */
            background: none;
            border: none;
            font-size: 1.5rem; /* text-2xl */
            cursor: pointer;
            color: #4A5568; /* gray-700 */
            transition: color 0.2s ease;
        }
        .close-button:hover {
            color: #EF4444; /* red-500 */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header Section -->
    <header class="bg-white shadow-md py-4 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center px-4">
            <!-- Logo -->
            <div class="flex items-center">
                <img src="https://placehold.co/50x50/B0E0B0/000000?text=Dubby+Logo" alt="Birbhum Pharmacy School Logo" class="h-12 mr-3 rounded-full">
                <span class="text-xl font-bold text-green-700">BIRBHUM PHARMACY SCHOOL</span>
            </div>

            <!-- Navigation -->
            <nav class="hidden md:flex space-x-6">
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Home</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">About Us</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Courses</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Facilities</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Admission</a>
                <a href="#" id="contact-us-btn" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Contact Us</a>
                <a href="#" id="ai-advisor-btn" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">✨ AI Advisor ✨</a>
            </nav>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-gray-700 text-2xl focus:outline-none">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu" class="md:hidden fixed inset-0 bg-white z-40 transform -translate-x-full transition-transform duration-300 ease-in-out">
            <div class="flex justify-end p-4">
                <button id="close-mobile-menu-btn" class="text-gray-700 text-3xl focus:outline-none">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="flex flex-col items-center space-y-6 text-xl mt-8">
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Home</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">About Us</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Courses</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Facilities</a>
                <a href="#" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Admission</a>
                <a href="#" id="contact-us-btn-mobile" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">Contact Us</a>
                <a href="#" id="ai-advisor-btn-mobile" class="text-gray-700 hover:text-green-600 font-medium transition duration-300">✨ AI Advisor ✨</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section flex items-center justify-center text-center text-white">
        <div class="hero-overlay absolute inset-0"></div>
        <div class="relative z-10 p-4">
            <h1 class="text-5xl md:text-6xl font-extrabold text-shadow mb-6">Birbhum Pharmacy School</h1>
            <a href="#" class="inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                Online Admission
            </a>
        </div>
    </section>

    <!-- Welcome Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-sm font-semibold text-gray-600 uppercase mb-2">Welcome to</h2>
            <h3 class="text-3xl font-bold text-green-700 mb-8">BIRBHUM PHARMACY SCHOOL</h3>
            <p class="text-gray-700 max-w-3xl mx-auto leading-relaxed">
                Birbhum Pharmacy School is dedicated to providing quality pharmaceutical education and fostering future leaders in healthcare. Our comprehensive curriculum, state-of-the-art facilities, and experienced faculty ensure a holistic learning environment. We aim to equip students with the knowledge and skills necessary to excel in the dynamic field of pharmacy.
            </p>
        </div>
    </section>

    <!-- Offered Courses Section -->
    <section class="py-16 green-bg-section text-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-10">Offered Courses</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Course Card 1 -->
                <div class="bg-gray-900 rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105">
                    <img src="https://placehold.co/400x250/333333/FFFFFF?text=Friendly+Students+Lab" alt="Course 1" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">Diploma in Pharmacy (D.Pharm)</h3>
                        <p class="text-gray-300 text-sm">A two-year diploma course focusing on fundamental pharmaceutical sciences.</p>
                    </div>
                </div>
                <!-- Course Card 2 -->
                <div class="bg-gray-900 rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105">
                    <img src="https://placehold.co/400x250/333333/FFFFFF?text=Cartoon+Lecture" alt="Course 2" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">Bachelor of Pharmacy (B.Pharm)</h3>
                        <p class="text-gray-300 text-sm">A four-year undergraduate degree covering advanced pharmaceutical studies.</p>
                    </div>
                </div>
                <!-- Course Card 3 -->
                <div class="bg-gray-900 rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105">
                    <img src="https://placehold.co/400x250/333333/FFFFFF?text=Happy+Graduates" alt="Course 3" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">Master of Pharmacy (M.Pharm)</h3>
                        <p class="text-gray-300 text-sm">Specialized postgraduate programs in various pharmaceutical disciplines.</p>
                    </div>
                </div>
                <!-- Course Card 4 -->
                <div class="bg-gray-900 rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105">
                    <img src="https://placehold.co/400x250/333333/FFFFFF?text=Research+Team" alt="Course 4" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">Pharmaceutical Research</h3>
                        <p class="text-gray-300 text-sm">Opportunities for research and development in drug discovery.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Top Approvals Section -->
    <section class="py-16 bg-gray-100">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold text-green-700 mb-10">Top Approvals</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 items-center justify-center">
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-md hover:shadow-xl transition duration-300 transform hover:scale-105">
                    <img src="https://placehold.co/100x100/CCCCCC/000000?text=PCI+Logo" alt="Approval 1" class="h-24 mb-2">
                    <p class="text-gray-700 font-semibold">Pharmacy Council of India</p>
                </div>
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-md hover:shadow-xl transition duration-300 transform hover:scale-105">
                    <img src="https://placehold.co/100x100/CCCCCC/000000?text=AICTE+Logo" alt="Approval 2" class="h-24 mb-2">
                    <p class="text-gray-700 font-semibold">AICTE Approved</p>
                </div>
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-md hover:shadow-xl transition duration-300 transform hover:scale-105">
                    <img src="https://placehold.co/100x100/CCCCCC/000000?text=UGC+Logo" alt="Approval 3" class="h-24 mb-2">
                    <p class="text-gray-700 font-semibold">UGC Recognized</p>
                </div>
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-md hover:shadow-xl transition duration-300 transform hover:scale-105">
                    <img src="https://placehold.co/100x100/CCCCCC/000000?text=NAAC+Logo" alt="Approval 4" class="h-24 mb-2">
                    <p class="text-gray-700 font-semibold">NAAC Accredited</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Vision & Mission Section -->
    <section class="py-16 dark-green-bg-section text-white">
        <div class="container mx-auto px-4 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <!-- Our Vision -->
            <div class="flex flex-col md:flex-row items-center bg-white rounded-xl shadow-lg p-6 text-gray-800">
                <img src="https://placehold.co/200x150/D0F0D0/000000?text=Friendly+Vision" alt="Our Vision" class="w-full md:w-1/2 h-auto rounded-lg mb-4 md:mb-0 md:mr-6">
                <div>
                    <h2 class="text-3xl font-bold text-green-700 mb-4">Our Vision</h2>
                    <p class="leading-relaxed">
                        To be a premier institution in pharmaceutical education and research, fostering innovation and ethical practices to contribute significantly to global healthcare. We envision a future where our graduates are leaders and innovators.
                    </p>
                </div>
            </div>
            <!-- Our Mission -->
            <div class="flex flex-col md:flex-row items-center bg-white rounded-xl shadow-lg p-6 text-gray-800">
                <img src="https://placehold.co/200x150/D0F0D0/000000?text=Friendly+Mission" alt="Our Mission" class="w-full md:w-1/2 h-auto rounded-lg mb-4 md:mb-0 md:mr-6">
                <div>
                    <h2 class="text-3xl font-bold text-green-700 mb-4">Our Mission</h2>
                    <p class="leading-relaxed">
                        To impart high-quality education, conduct cutting-edge research, and provide professional training that meets the evolving needs of the pharmaceutical industry and healthcare sector.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-16 bg-gray-100">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold text-green-700 mb-10">What Our Students Say</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Testimonial Card 1 -->
                <div class="bg-white rounded-xl shadow-lg p-8 flex flex-col items-center text-center">
                    <img src="https://placehold.co/80x80/E0E0E0/000000?text=Dubby+Student1" alt="Student 1" class="w-20 h-20 rounded-full mb-4 object-cover">
                    <p class="text-gray-700 italic mb-4">
                        "Birbhum Pharmacy School provided me with an excellent foundation in pharmaceutical sciences. The faculty is highly supportive, and the practical training is top-notch. I highly recommend it!"
                    </p>
                    <p class="font-semibold text-green-700">- Anjali Sharma, Alumni</p>
                </div>
                <!-- Testimonial Card 2 -->
                <div class="bg-white rounded-xl shadow-lg p-8 flex flex-col items-center text-center">
                    <img src="https://placehold.co/80x80/E0E0E0/000000?text=Dubby+Student2" alt="Student 2" class="w-20 h-20 rounded-full mb-4 object-cover">
                    <p class="text-gray-700 italic mb-4">
                        "The campus environment is fantastic, and the research opportunities here are unparalleled. I'm grateful for the skills and knowledge I gained, which prepared me for a successful career."
                    </p>
                    <p class="font-semibold text-green-700">- Rahul Singh, Alumni</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Corporate Partners Section -->
    <section class="py-16 green-bg-section text-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-10">Our Corporate Partners</h2>
            <div class="flex flex-wrap justify-center items-center gap-8">
                <img src="https://placehold.co/150x80/FFFFFF/000000?text=Dubby+Partner1" alt="Partner 1" class="h-20 w-auto object-contain rounded-lg p-2 bg-white shadow-md">
                <img src="https://placehold.co/150x80/FFFFFF/000000?text=Dubby+Partner2" alt="Partner 2" class="h-20 w-auto object-contain rounded-lg p-2 bg-white shadow-md">
                <img src="https://placehold.co/150x80/FFFFFF/000000?text=Dubby+Partner3" alt="Partner 3" class="h-20 w-auto object-contain rounded-lg p-2 bg-white shadow-md">
                <img src="https://placehold.co/150x80/FFFFFF/000000?text=Dubby+Partner4" alt="Partner 4" class="h-20 w-auto object-contain rounded-lg p-2 bg-white shadow-md">
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer-bg text-gray-300 py-12">
        <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8">
            <!-- About Us -->
            <div>
                <h3 class="text-xl font-bold text-white mb-4">About Us</h3>
                <p class="text-sm leading-relaxed">
                    Birbhum Pharmacy School is committed to excellence in pharmaceutical education and research, preparing students for impactful careers.
                </p>
            </div>
            <!-- Quick Links -->
            <div>
                <h3 class="text-xl font-bold text-white mb-4">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="#" class="text-sm hover:text-green-400 transition duration-300">Home</a></li>
                    <li><a href="#" class="text-sm hover:text-green-400 transition duration-300">About Us</a></li>
                    <li><a href="#" class="text-sm hover:text-green-400 transition duration-300">Courses</a></li>
                    <li><a href="#" class="text-sm hover:text-green-400 transition duration-300">Admission</a></li>
                </ul>
            </div>
            <!-- Contact Info -->
            <div>
                <h3 class="text-xl font-bold text-white mb-4">Contact Info</h3>
                <p class="text-sm mb-2"><i class="fas fa-map-marker-alt mr-2 text-green-400"></i> 123 Pharmacy Rd, Birbhum, WB 731101</p>
                <p class="text-sm mb-2"><i class="fas fa-phone-alt mr-2 text-green-400"></i> +91 12345 67890</p>
                <p class="text-sm mb-2"><i class="fas fa-envelope mr-2 text-green-400"></i> info@birbhumpharmacy.in</p>
            </div>
            <!-- Social Media -->
            <div>
                <h3 class="text-xl font-bold text-white mb-4">Follow Us</h3>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-300 hover:text-green-400 text-2xl transition duration-300"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="text-gray-300 hover:text-green-400 text-2xl transition duration-300"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-300 hover:text-green-400 text-2xl transition duration-300"><i class="fab fa-linkedin"></i></a>
                    <a href="#" class="text-gray-300 hover:text-green-400 text-2xl transition duration-300"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="text-center text-sm text-gray-500 mt-8">
            &copy; <span id="current-year"></span> Birbhum Pharmacy School. All rights reserved.
        </div>
    </footer>

    <!-- Contact Us Popup Window -->
    <div id="contact-popup-overlay" class="popup-overlay">
        <div class="popup-content">
            <button id="close-contact-popup-btn" class="close-button">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="text-3xl font-bold text-green-700 mb-6 text-center">Contact Us</h2>
            <form class="space-y-4">
                <div>
                    <label for="name" class="block text-gray-700 text-sm font-bold mb-2">Your Name:</label>
                    <input type="text" id="name" name="name" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-400" placeholder="Enter your name">
                </div>
                <div>
                    <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Your Email:</label>
                    <input type="email" id="email" name="email" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-400" placeholder="Enter your email">
                </div>
                <div>
                    <label for="message" class="block text-gray-700 text-sm font-bold mb-2">Message:</label>
                    <textarea id="message" name="message" rows="5" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-400" placeholder="Type your message here..."></textarea>
                </div>
                <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 transform hover:scale-105">
                    Send Message
                </button>
            </form>
        </div>
    </div>

    <!-- AI Advisor Popup Window -->
    <div id="ai-advisor-popup-overlay" class="popup-overlay">
        <div class="popup-content">
            <button id="close-ai-advisor-popup-btn" class="close-button">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">✨ AI Course Advisor ✨</h2>
            <div class="space-y-4">
                <div>
                    <label for="ai-question" class="block text-gray-700 text-sm font-bold mb-2">Ask your question:</label>
                    <textarea id="ai-question" rows="4" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="E.g., What are the admission requirements for B.Pharm?"></textarea>
                </div>
                <button id="ask-ai-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 transform hover:scale-105">
                    Ask Advisor
                </button>
                <div id="ai-response-area" class="bg-gray-100 p-4 rounded-lg min-h-[100px] max-h-[300px] overflow-y-auto text-gray-800 text-sm border border-gray-300">
                    <p class="text-gray-500">Your AI advisor's response will appear here.</p>
                </div>
                <div id="ai-loading-indicator" class="hidden text-center text-blue-600 font-semibold">
                    <i class="fas fa-spinner fa-spin mr-2"></i> Thinking...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get current year for footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeMobileMenuBtn = document.getElementById('close-mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.remove('-translate-x-full');
        });

        closeMobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.add('-translate-x-full');
        });

        // Contact Us Popup functionality
        const contactUsBtn = document.getElementById('contact-us-btn');
        const contactUsBtnMobile = document.getElementById('contact-us-btn-mobile');
        const contactPopupOverlay = document.getElementById('contact-popup-overlay');
        const closeContactPopupBtn = document.getElementById('close-contact-popup-btn');

        const openContactPopup = () => {
            contactPopupOverlay.classList.add('active');
            mobileMenu.classList.add('-translate-x-full'); // Close mobile menu if open
        };

        const closeContactPopup = () => {
            contactPopupOverlay.classList.remove('active');
        };

        contactUsBtn.addEventListener('click', openContactPopup);
        contactUsBtnMobile.addEventListener('click', openContactPopup);
        closeContactPopupBtn.addEventListener('click', closeContactPopup);

        // Close contact popup when clicking outside the content
        contactPopupOverlay.addEventListener('click', (e) => {
            if (e.target === contactPopupOverlay) {
                closeContactPopup();
            }
        });

        // AI Advisor Popup functionality
        const aiAdvisorBtn = document.getElementById('ai-advisor-btn');
        const aiAdvisorBtnMobile = document.getElementById('ai-advisor-btn-mobile');
        const aiAdvisorPopupOverlay = document.getElementById('ai-advisor-popup-overlay');
        const closeAiAdvisorPopupBtn = document.getElementById('close-ai-advisor-popup-btn');
        const aiQuestionInput = document.getElementById('ai-question');
        const askAiBtn = document.getElementById('ask-ai-btn');
        const aiResponseArea = document.getElementById('ai-response-area');
        const aiLoadingIndicator = document.getElementById('ai-loading-indicator');

        const openAiAdvisorPopup = () => {
            aiAdvisorPopupOverlay.classList.add('active');
            mobileMenu.classList.add('-translate-x-full'); // Close mobile menu if open
            aiResponseArea.innerHTML = '<p class="text-gray-500">Your AI advisor\'s response will appear here.</p>'; // Reset response area
            aiQuestionInput.value = ''; // Clear input
        };

        const closeAiAdvisorPopup = () => {
            aiAdvisorPopupOverlay.classList.remove('active');
        };

        aiAdvisorBtn.addEventListener('click', openAiAdvisorPopup);
        aiAdvisorBtnMobile.addEventListener('click', openAiAdvisorPopup);
        closeAiAdvisorPopupBtn.addEventListener('click', closeAiAdvisorPopup);

        // Close AI advisor popup when clicking outside the content
        aiAdvisorPopupOverlay.addEventListener('click', (e) => {
            if (e.target === aiAdvisorPopupOverlay) {
                closeAiAdvisorPopup();
            }
        });

        // Gemini API integration for AI Advisor
        askAiBtn.addEventListener('click', async () => {
            const prompt = aiQuestionInput.value.trim();
            if (!prompt) {
                aiResponseArea.innerHTML = '<p class="text-red-500">Please enter a question.</p>';
                return;
            }

            aiResponseArea.innerHTML = ''; // Clear previous response
            aiLoadingIndicator.classList.remove('hidden'); // Show loading indicator
            askAiBtn.disabled = true; // Disable button during request

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });

            const payload = { contents: chatHistory };
            const apiKey = ""; // Canvas will provide this at runtime
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorBody = await response.json();
                    throw new Error(`API error: ${response.status} ${response.statusText} - ${errorBody.error.message || 'Unknown error'}`);
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    aiResponseArea.innerHTML = `<p>${text}</p>`;
                } else {
                    aiResponseArea.innerHTML = '<p class="text-red-500">No valid response from AI advisor. Please try again.</p>';
                }
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                aiResponseArea.innerHTML = `<p class="text-red-500">Failed to get response: ${error.message}. Please check console for details.</p>`;
            } finally {
                aiLoadingIndicator.classList.add('hidden'); // Hide loading indicator
                askAiBtn.disabled = false; // Re-enable button
            }
        });
    </script>
</body>
</html>
